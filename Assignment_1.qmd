---
title: "Sok-1005_Assignment_1"
author: Daniel Johannessen. kandidat nummer 3
format: html
editor: visual
---

## Assignment 1 Reading static webpages. 

We start by gathering the data we need and getting all our packages

The data is:
Lower-Troposphere\
Mid-Troposphere\
Tropopause\
Lower-Stratosphere

```{r, warning=False}
rm(list=ls()) #emptying enviroment
library(tidyverse)
library(lubridate)


lower <- read_table("http://vortex.nsstc.uah.edu/data/msu/v6.0/tlt/uahncdc_lt_6.0.txt")
mid <- read_table("http://vortex.nsstc.uah.edu/data/msu/v6.0/tmt/uahncdc_mt_6.0.txt")
tropopause <- read_table("http://vortex.nsstc.uah.edu/data/msu/v6.0/ttp/uahncdc_tp_6.0.txt")
stratosphere <- read_table("http://vortex.nsstc.uah.edu/data/msu/v6.0/tls/uahncdc_ls_6.0.txt")
```

Now that we have gotten our data and our packages, i start with removing the last rows in the dataset that contains comments that we don't need.

Here I use code to dynamically remove the comments even if new data is added. The code is gathered from the link provided below. It is at line 43.

[Source of the code used for dynamic code](https://github.com/uit-sok-1005-v23/uit-sok-1005-v23.github.io/blob/main/Global_Temperature.R "Line 43")

```{r}

lower <- lower[1:which(lower$Year %in% "Year")-1, ]
mid <- mid[1:which(mid$Year %in% "Year")-1, ]
tropopause <- tropopause[1:which(tropopause$Year %in% "Year")-1, ]
stratosphere <- stratosphere[1:which(stratosphere$Year %in% "Year")-1, ]


```

We are told to also only use data in the Globe column so I will now select it out of each dataset then combine the datasets into one.

```{r}
lower <- lower %>% 
  mutate(Date = ym(paste(Year, Mo))) %>% #Creating a Date variable
  select(Date , Year, Mo, Globe) %>%  #selecting and arranging the data we want
  rename(lowerglobe = Globe)
  
mid <- mid %>% 
  mutate(Date = ym(paste(Year, Mo))) %>% 
  select(Date ,Year, Mo, Globe) %>% 
  rename(mid_globe = Globe)

stratosphere <- stratosphere %>% 
  mutate(Date = ym(paste(Year, Mo))) %>% 
  select(Date, Year, Mo, Globe) %>% 
  rename(stratosphere_globe = Globe)

tropopause <- tropopause %>% 
  mutate(Date = ym(paste(Year, Mo))) %>% 
  select(Date, Year, Mo, Globe) %>% 
  rename(tropopause_globe = Globe)

```

We now combine them into one dataset we can work with and we convert strings to numeric.

```{r}

df <- lower %>% 
  cbind(mid_globe = mid$mid_globe) %>% 
  cbind(stratosphere_globe = stratosphere$stratosphere_globe) %>% 
  cbind(tropopause_globe = tropopause$tropopause_globe) %>% 
  mutate_if(is.character, ~as.numeric(.))
```

Now that we have made our datasets, its time to start creating rolling averages

```{r}

```
